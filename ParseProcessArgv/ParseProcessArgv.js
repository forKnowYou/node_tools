"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var myTools_1 = require("../myTools/myTools");
function parseProcessArgv(iArgv) {
    var argv = process.argv;
    console.log("");
    myTools_1.myTools.consoleWithColor("argv: " + argv, "green");
    console.log("");
    var funcs = [];
    var aArg = [];
    if ((argv.length === 3) && (argv[2] === "--help")) {
        iArgv.description ? console.log(iArgv.description) : {};
        console.log("--help: show this message");
        for (var i = 0; i < iArgv.aArgvConfig.length; i++)
            console.log(iArgv.aArgvConfig[i].arg + ": " + iArgv.aArgvConfig[i].description);
        process.exit();
    }
    for (var i = 2; i < argv.length;) {
        var err = true;
        for (var j = 0; j < iArgv.aArgvConfig.length; j++) {
            if ((argv[i] === iArgv.aArgvConfig[j].arg) && ((i + iArgv.aArgvConfig[j].argc) < argv.length)) {
                err = false;
                funcs.push(iArgv.aArgvConfig[j].func);
                aArg.push(argv.slice(i + 1, i + iArgv.aArgvConfig[j].argc + 1));
                i += iArgv.aArgvConfig[j].argc + 1;
                break;
            }
        }
        if (err) {
            iArgv.fUnexpectedArgv ? iArgv.fUnexpectedArgv() : {};
            return;
        }
    }
    for (var i = 0; i < funcs.length; i++)
        funcs[i](aArg[i]);
    iArgv.fCompelete();
}
exports.parseProcessArgv = parseProcessArgv;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFyc2VQcm9jZXNzQXJndi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlBhcnNlUHJvY2Vzc0FyZ3YudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw4Q0FFMkI7QUFpQjNCLFNBQVMsZ0JBQWdCLENBQUMsS0FBd0I7SUFDaEQsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQTtJQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ2YsaUJBQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFTLElBQU0sRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUNsRCxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ2YsSUFBSSxLQUFLLEdBQXVCLEVBQUUsQ0FBQTtJQUNsQyxJQUFJLElBQUksR0FBeUIsRUFBRSxDQUFBO0lBQ25DLElBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsQ0FBQyxFQUFFO1FBQ2hELEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7UUFDdkQsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFBO1FBQ3hDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUc7WUFDL0MsT0FBTyxDQUFDLEdBQUcsQ0FBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBSyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQWEsQ0FBQyxDQUFBO1FBQ2pGLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtLQUNmO0lBQ0QsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUk7UUFDaEMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFBO1FBQ2QsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRyxFQUFFO1lBQ2pELElBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUM1RixHQUFHLEdBQUcsS0FBSyxDQUFBO2dCQUNYLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQy9ELENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUE7Z0JBQ2xDLE1BQUs7YUFDTjtTQUNGO1FBQ0QsSUFBRyxHQUFHLEVBQUU7WUFDTixLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUNwRCxPQUFNO1NBQ1A7S0FDRjtJQUNELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRztRQUNuQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDbkIsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFBO0FBQ3BCLENBQUM7QUFHQyw0Q0FBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIG15VG9vbHNcclxufSBmcm9tIFwiLi4vbXlUb29scy9teVRvb2xzXCJcclxuXHJcbmludGVyZmFjZSBpUHJvY2Vzc0FyZ3ZDb25maWcge1xyXG4gIGFyZzogc3RyaW5nLFxyXG4gIGFyZ2M6IG51bWJlcixcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gIGZ1bmM6IChhQXJnOiBBcnJheTxzdHJpbmc+KSA9PiBhbnlcclxufVxyXG5cclxuaW50ZXJmYWNlIGlQYXJzZVByb2Nlc3NBcmd2IHtcclxuICBhQXJndkNvbmZpZzogQXJyYXk8aVByb2Nlc3NBcmd2Q29uZmlnPixcclxuICBmQ29tcGVsZXRlOiBBbnlGdW5jdGlvbixcclxuXHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmcsXHJcbiAgZlVuZXhwZWN0ZWRBcmd2PzogQW55RnVuY3Rpb25cclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VQcm9jZXNzQXJndihpQXJndjogaVBhcnNlUHJvY2Vzc0FyZ3YpIHtcclxuICBsZXQgYXJndiA9IHByb2Nlc3MuYXJndlxyXG4gIGNvbnNvbGUubG9nKGBgKVxyXG4gIG15VG9vbHMuY29uc29sZVdpdGhDb2xvcihgYXJndjogJHthcmd2fWAsIFwiZ3JlZW5cIilcclxuICBjb25zb2xlLmxvZyhgYClcclxuICBsZXQgZnVuY3M6IEFycmF5PEFueUZ1bmN0aW9uPiA9IFtdXHJcbiAgbGV0IGFBcmc6IEFycmF5PEFycmF5PHN0cmluZz4+ID0gW11cclxuICBpZigoYXJndi5sZW5ndGggPT09IDMpICYmIChhcmd2WzJdID09PSBcIi0taGVscFwiKSkge1xyXG4gICAgaUFyZ3YuZGVzY3JpcHRpb24gPyBjb25zb2xlLmxvZyhpQXJndi5kZXNjcmlwdGlvbikgOiB7fVxyXG4gICAgY29uc29sZS5sb2coYC0taGVscDogc2hvdyB0aGlzIG1lc3NhZ2VgKVxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGlBcmd2LmFBcmd2Q29uZmlnLmxlbmd0aDsgaSArKylcclxuICAgICAgY29uc29sZS5sb2coYCR7aUFyZ3YuYUFyZ3ZDb25maWdbaV0uYXJnfTogJHtpQXJndi5hQXJndkNvbmZpZ1tpXS5kZXNjcmlwdGlvbn1gKVxyXG4gICAgcHJvY2Vzcy5leGl0KClcclxuICB9XHJcbiAgZm9yKGxldCBpID0gMjsgaSA8IGFyZ3YubGVuZ3RoOyApIHtcclxuICAgIGxldCBlcnIgPSB0cnVlXHJcbiAgICBmb3IobGV0IGogPSAwOyBqIDwgaUFyZ3YuYUFyZ3ZDb25maWcubGVuZ3RoOyBqICsrKSB7XHJcbiAgICAgIGlmKChhcmd2W2ldID09PSBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmcpICYmICgoaSArIGlBcmd2LmFBcmd2Q29uZmlnW2pdLmFyZ2MpIDwgYXJndi5sZW5ndGgpKSB7XHJcbiAgICAgICAgZXJyID0gZmFsc2VcclxuICAgICAgICBmdW5jcy5wdXNoKGlBcmd2LmFBcmd2Q29uZmlnW2pdLmZ1bmMpXHJcbiAgICAgICAgYUFyZy5wdXNoKGFyZ3Yuc2xpY2UoaSArIDEsIGkgKyBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmdjICsgMSkpXHJcbiAgICAgICAgaSArPSBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmdjICsgMVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKGVycikge1xyXG4gICAgICBpQXJndi5mVW5leHBlY3RlZEFyZ3YgPyBpQXJndi5mVW5leHBlY3RlZEFyZ3YoKSA6IHt9XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gIH1cclxuICBmb3IobGV0IGkgPSAwOyBpIDwgZnVuY3MubGVuZ3RoOyBpICsrKVxyXG4gICAgZnVuY3NbaV0oYUFyZ1tpXSlcclxuICBpQXJndi5mQ29tcGVsZXRlKClcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBwYXJzZVByb2Nlc3NBcmd2XHJcbn1cclxuIl19