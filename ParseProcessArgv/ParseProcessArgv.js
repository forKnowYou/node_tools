"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var myTools_1 = require("../myTools/myTools");
function parseProcessArgv(iArgv) {
    var argv = process.argv;
    console.log("");
    myTools_1.myTools.consoleWithColor("argv: " + argv, "green");
    console.log("");
    var funcs = [];
    var aArg = [];
    if ((argv.length === 3) && (argv[2] === "--help")) {
        iArgv.description ? console.log(iArgv.description) : {};
        console.log("--help: show this message");
        for (var i = 0; i < iArgv.aArgvConfig.length; i++)
            console.log(iArgv.aArgvConfig[i].arg + ": " + iArgv.aArgvConfig[i].description);
        process.exit();
    }
    for (var i = 2; i < argv.length;) {
        var err = true;
        for (var j = 0; j < iArgv.aArgvConfig.length; j++) {
            if ((argv[i] === iArgv.aArgvConfig[j].arg) && ((i + iArgv.aArgvConfig[j].argc) < argv.length)) {
                err = false;
                funcs.push(iArgv.aArgvConfig[j].func);
                aArg.push(argv.slice(i + 1, i + iArgv.aArgvConfig[j].argc + 1));
                i += iArgv.aArgvConfig[j].argc + 1;
                break;
            }
        }
        if (err) {
            iArgv.fUnexpectedArgv ? iArgv.fUnexpectedArgv() : {};
            return;
        }
    }
    for (var i = 0; i < funcs.length; i++)
        funcs[i](aArg[i]);
    iArgv.fCompelete();
}
exports.parseProcessArgv = parseProcessArgv;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFyc2VQcm9jZXNzQXJndi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlBhcnNlUHJvY2Vzc0FyZ3YudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw4Q0FFMkI7QUFpQjNCLFNBQWdCLGdCQUFnQixDQUFDLEtBQXdCO0lBQ3ZELElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUE7SUFDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUNmLGlCQUFPLENBQUMsZ0JBQWdCLENBQUMsV0FBUyxJQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDbEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUNmLElBQUksS0FBSyxHQUF1QixFQUFFLENBQUE7SUFDbEMsSUFBSSxJQUFJLEdBQXlCLEVBQUUsQ0FBQTtJQUNuQyxJQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRLENBQUMsRUFBRTtRQUNoRCxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQTtRQUN4QyxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFHO1lBQy9DLE9BQU8sQ0FBQyxHQUFHLENBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQUssS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFhLENBQUMsQ0FBQTtRQUNqRixPQUFPLENBQUMsSUFBSSxFQUFFLENBQUE7S0FDZjtJQUNELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFJO1FBQ2hDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQTtRQUNkLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUcsRUFBRTtZQUNqRCxJQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDNUYsR0FBRyxHQUFHLEtBQUssQ0FBQTtnQkFDWCxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUMvRCxDQUFDLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFBO2dCQUNsQyxNQUFLO2FBQ047U0FDRjtRQUNELElBQUcsR0FBRyxFQUFFO1lBQ04sS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7WUFDcEQsT0FBTTtTQUNQO0tBQ0Y7SUFDRCxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUc7UUFDbkMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ25CLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQTtBQUNwQixDQUFDO0FBakNELDRDQWlDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgbXlUb29sc1xyXG59IGZyb20gXCIuLi9teVRvb2xzL215VG9vbHNcIlxyXG5cclxuaW50ZXJmYWNlIGlQcm9jZXNzQXJndkNvbmZpZyB7XHJcbiAgYXJnOiBzdHJpbmcsXHJcbiAgYXJnYzogbnVtYmVyLFxyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgZnVuYzogKGFBcmc6IEFycmF5PHN0cmluZz4pID0+IGFueVxyXG59XHJcblxyXG5pbnRlcmZhY2UgaVBhcnNlUHJvY2Vzc0FyZ3Yge1xyXG4gIGFBcmd2Q29uZmlnOiBBcnJheTxpUHJvY2Vzc0FyZ3ZDb25maWc+LFxyXG4gIGZDb21wZWxldGU6IEFueUZ1bmN0aW9uLFxyXG5cclxuICBkZXNjcmlwdGlvbj86IHN0cmluZyxcclxuICBmVW5leHBlY3RlZEFyZ3Y/OiBBbnlGdW5jdGlvblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQcm9jZXNzQXJndihpQXJndjogaVBhcnNlUHJvY2Vzc0FyZ3YpIHtcclxuICBsZXQgYXJndiA9IHByb2Nlc3MuYXJndlxyXG4gIGNvbnNvbGUubG9nKGBgKVxyXG4gIG15VG9vbHMuY29uc29sZVdpdGhDb2xvcihgYXJndjogJHthcmd2fWAsIFwiZ3JlZW5cIilcclxuICBjb25zb2xlLmxvZyhgYClcclxuICBsZXQgZnVuY3M6IEFycmF5PEFueUZ1bmN0aW9uPiA9IFtdXHJcbiAgbGV0IGFBcmc6IEFycmF5PEFycmF5PHN0cmluZz4+ID0gW11cclxuICBpZigoYXJndi5sZW5ndGggPT09IDMpICYmIChhcmd2WzJdID09PSBcIi0taGVscFwiKSkge1xyXG4gICAgaUFyZ3YuZGVzY3JpcHRpb24gPyBjb25zb2xlLmxvZyhpQXJndi5kZXNjcmlwdGlvbikgOiB7fVxyXG4gICAgY29uc29sZS5sb2coYC0taGVscDogc2hvdyB0aGlzIG1lc3NhZ2VgKVxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGlBcmd2LmFBcmd2Q29uZmlnLmxlbmd0aDsgaSArKylcclxuICAgICAgY29uc29sZS5sb2coYCR7aUFyZ3YuYUFyZ3ZDb25maWdbaV0uYXJnfTogJHtpQXJndi5hQXJndkNvbmZpZ1tpXS5kZXNjcmlwdGlvbn1gKVxyXG4gICAgcHJvY2Vzcy5leGl0KClcclxuICB9XHJcbiAgZm9yKGxldCBpID0gMjsgaSA8IGFyZ3YubGVuZ3RoOyApIHtcclxuICAgIGxldCBlcnIgPSB0cnVlXHJcbiAgICBmb3IobGV0IGogPSAwOyBqIDwgaUFyZ3YuYUFyZ3ZDb25maWcubGVuZ3RoOyBqICsrKSB7XHJcbiAgICAgIGlmKChhcmd2W2ldID09PSBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmcpICYmICgoaSArIGlBcmd2LmFBcmd2Q29uZmlnW2pdLmFyZ2MpIDwgYXJndi5sZW5ndGgpKSB7XHJcbiAgICAgICAgZXJyID0gZmFsc2VcclxuICAgICAgICBmdW5jcy5wdXNoKGlBcmd2LmFBcmd2Q29uZmlnW2pdLmZ1bmMpXHJcbiAgICAgICAgYUFyZy5wdXNoKGFyZ3Yuc2xpY2UoaSArIDEsIGkgKyBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmdjICsgMSkpXHJcbiAgICAgICAgaSArPSBpQXJndi5hQXJndkNvbmZpZ1tqXS5hcmdjICsgMVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKGVycikge1xyXG4gICAgICBpQXJndi5mVW5leHBlY3RlZEFyZ3YgPyBpQXJndi5mVW5leHBlY3RlZEFyZ3YoKSA6IHt9XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gIH1cclxuICBmb3IobGV0IGkgPSAwOyBpIDwgZnVuY3MubGVuZ3RoOyBpICsrKVxyXG4gICAgZnVuY3NbaV0oYUFyZ1tpXSlcclxuICBpQXJndi5mQ29tcGVsZXRlKClcclxufVxyXG4iXX0=